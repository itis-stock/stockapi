# Обзор

## Краткий обзор

Здесь вы сможете найти руководство по stockapi

API поддерживает `GET` и `POST` запросы. Для `POST` запроса необходим `MASTER_KEY`. Но вы этот ключ не получите, так что зачилльтесь.

В ответ на любой запрос получаем JSON.

# Быстрый старт

## Быстрый старт

API доступно по ссылке - https://stockapi.netlify.app/api/

## GET

`GET https://stockapi.netlify.app/api/<METHOD>?<PARAMS>`

## POST

`POST https://stockapi.netlify.app/api/<METHOD>`

Чтобы совершить `POST` запрос, необходимо указать в `Headers` ключ `master_key`

Также необходимо передать `BODY PARAMS` в формате `x-form-www-urlencoded`

# Стандартный ответ

## status

### number

Кодовое состояние статуса

## time

### number

время в секундах, потраченное на запрос

## type

### 'array' | 'object' | 'error' | 'post'

тип ответа

## errormessage

### string

### необязательный

Сообщение об ошибки

## count

### number

### необязательный

Количество элементов, если `type` === `array`

## data

сам возвращаемый объект или массив

# Коды status

## Коды status

### 200

Все с кайфом

### 0

не указан в `Headers` `master_key` или указан неправильно

### 2

не указан обязательный query-параметр `fb_id`

### 4

не указан обязательный параметр `author_id`

### 5

параметр `author_id` не число

### 6

не указан обязательный параметр `url`

### 7

некорректный `url`

### 8

не указан обязательный параметр `course`

### 9

параметр `course` не число

### 10

не указан обязательный параметр `semestr`

### 11

параметр `semestr` не число

### 12

не указан обязательный параметр `teacher`

### 13

не указан обязательный параметр `subject`

### 14

некорректный `teacher`

### 15

некорректный `subject`

### 16

ошибка `Firebase`

### 17

не указан ни `text`, ни `photo_urls`

### 18

указан `photo_urls`, но не указан `photo_heights`

### 19

указан `photo_urls`, но не указан `photo_widths`

### 20

какая-нибудь ссылка из `photo_urls` некорректна

### 21

какое-нибудь значение из `photo_heights` не число

### 22

какое-нибудь значение из `photo_widths` не число

### 23

не указан обязательный параметр `id_vk`

### 24

параметр `id_vk` не число

### 25

не указан обязательный параметр `name_vk`

### 26

не указан обязательный параметр `telegram_nickname`

### 27

не указан обязательный параметр `group`

### 28

параметр `noise` не булево значение

### 29

параметр `hidden` не булево значение

### 30

`description` некорректного типа

### 31

`display_name` некорректного типа

### 32

`photo_url` некорректного типа

### 33

ошибка при чтении `README.md`

# AttachmentsType

## AttachmentsType

Специальный объект, хранящий либо `photo`, либо `doc`

## photo

Хранящий массив элементов, состоящий из объектов

## height

### number

Высота фотографии

## width

### number

Ширина фотографии

## url

### string

Ссылка на фотографию

## doc

Специальный объект, в котором хранится информация о документе

## title

### string

Название документа

## size

### number

Размер документа в байтах

## url

### string

Ссылка на документ

# DocsMetaType

## DocsMetaType

Специальный объект, который хранится в `meta`

## fb_id

### string

Идентификатор документа

## course

### number

Курс. Может быть указан `null`, если курс неизвестен

## semestr

### number

Семестр. Может быть указан `null`, если семестр неизвестен

## subject

### string

Предмет. Может быть указан `null`, если предмет неизвестен

## teacher

### string

Преподаватель. Может быть указан `null`, если преподаватель неизвестен

## title

### string

Название документа. Может быть указан `null`, если название документа неизвестен

## year

### number

Год

# MetaType

## MetaType

Специальный объект, который хранится в `meta`

Внутри него используются так называемые ключи, которые образуется в таком формате `<course>_<semestr>_<subject>_<teacher>`

Внутри каждого такого ключа хранится массив `string` из `fb_id`

# GroupsMetaType

## GroupsMetaType

Специальный объект, который хранится в `meta`

## course

### number

Курс

## group

### string

Название группы

## teachers

### string

Идентификатор объекта в `teachers`

# docs.get

## Метод

### GET

Возвращает определенный документ из `Firebase` по определенному `fb_id`

## Параметры

Параметры, которые передаются через `?<PARAMS>`

## fb_id

### string

### обязательный

Индекс документа из базы данных `Firebase Firestore`

## Результат

Возвращает один элемент `docs`, используя стандартный ответ `stockapi`

То есть внутри `data`, который находится внутри `response`

Могут также передаваться некоторые неуказанные элементы

## author_id

### number

Идентификатор автора документа. Может быть указан `0`, если автор неизвестен

## course

### number

Курс. Может быть указан `null`, если курс неизвестен

## semestr

### number

Семестр. Может быть указан `null`, если семестр неизвестен

## subject

### string

Предмет. Может быть указан `null`, если предмет неизвестен

## teacher

### string

Преподаватель. Может быть указан `null`, если преподаватель неизвестен

## title

### string

Название документа. Может быть указан `null`, если название не было указано

## date

### number

Время в формате `unixtime` в секундах

## year

### number

Год

## likes

### number

Количество лайков

## url

### string

ссылка на документ

## Коды status

### 200

Все с кайфом

### 2

не указан обязательный query-параметр `fb_id`

### 16

ошибка `Firebase`

# exams.get

## Метод

### GET

Возвращает определенный пост из `Firebase` по определенному `fb_id`

## Параметры

Параметры, которые передаются через `?<PARAMS>`

## fb_id

### string

### обязательный

Индекс поста из базы данных `Firebase Firestore`

## Результат

Возвращает один элемент `exams`, используя стандартный ответ `stockapi`

То есть внутри `data`, который находится внутри `response`

Могут также передаваться некоторые неуказанные элементы

## author_id

### number

Идентификатор автора

## course

### number

Курс. Может быть указан `null`, если курс неизвестен

## semestr

### number

Семестр. Может быть указан `null`, если семестр неизвестен

## subject

### string

Предмет. Может быть указан `null`, если предмет неизвестен

## teacher

### string

Преподаватель. Может быть указан `null`, если преподаватель неизвестен

## date

### number

Время в формате `unixtime` в секундах

## likes

### number

Количество лайков

## text

### string

Текст поста. Разделитель абзаца сделан через `$$`

## attachments

### AttachmentsType[]

Специальный формат вложения

## Коды status

### 200

Все с кайфом

### 2

не указан обязательный query-параметр `fb_id`

### 16

ошибка `Firebase`

# tests.get

## Метод

### GET

Возвращает определенный пост из `Firebase` по определенному `fb_id`

## Параметры

Параметры, которые передаются через `?<PARAMS>`

## fb_id

### string

### обязательный

Индекс поста из базы данных `Firebase Firestore`

## Результат

Возвращает один элемент `tests`, используя стандартный ответ `stockapi`

То есть внутри `data`, который находится внутри `response`

Могут также передаваться некоторые неуказанные элементы

## author_id

### number

Идентификатор автора

## course

### number

Курс. Может быть указан `null`, если курс неизвестен

## semestr

### number

Семестр. Может быть указан `null`, если семестр неизвестен

## subject

### string

Предмет. Может быть указан `null`, если предмет неизвестен

## teacher

### string

Преподаватель. Может быть указан `null`, если преподаватель неизвестен

## date

### number

Время в формате `unixtime` в секундах

## likes

### number

Количество лайков

## text

### string

Текст поста. Разделитель абзаца сделан через `$$`

## attachments

### AttachmentsType[]

Специальный формат вложения

## Коды status

### 200

Все с кайфом

### 2

не указан обязательный query-параметр `fb_id`

### 16

ошибка `Firebase`

# meta.getActual

## Метод

### GET

Возвращает актуальную `meta` информацию

## Результат

Возвращает актуальный элемент `meta`, используя стандартный ответ `stockapi`

То есть внутри `data`, который находится внутри `response`

Могут также передаваться некоторые неуказанные элементы

## docs

### DocsMetaType[]

Специальный объект типа документов

## exams

### MetaType

Специальный объект типа для сливов экзаменов

## tests

### MetaType

Специальный объект типа для сливов кр

## groups

### GroupsMetaType[]

Специальный объект типа для групп

## users

### string[]

Идентификаторы всех пользователей

## Коды status

### 200

Все с кайфом

### 16

ошибка `Firebase`

# users.check

## Метод

### GET

Возвращает определенного юзера из `Firebase` по определенному `fb_id`

## Параметры

Параметры, которые передаются через `?<PARAMS>`

## fb_id

### string

### обязательный

Индекс поста из базы данных `Firebase Firestore`

## Результат

Возвращает один элемент `users`, используя стандартный ответ `stockapi`

То есть внутри `data`, который находится внутри `response`

Могут также передаваться некоторые неуказанные элементы

## description

### string

Описание аккаунта

## display_name

### string

Отображаемое имя

## group

### string

Группа пользователя

## id

### number

Идентификатор пользователя

## photo_url

### string

Ссылка на аватарку

## telegram_nickname

### string

Никнейм на телеграм пользователя

## Коды status

### 200

Все с кайфом

### 2

не указан обязательный query-параметр `fb_id`

### 16

ошибка `Firebase`

# api.get

## Метод

### GET

Возвращает документацию `stockapi` в специальном формате

## Результат

Возвращает актуальную версию документации `stockapi` на основе стандартного ответа

Возвращает массив из специальных объектов `apiType`

## apiType

{ title: string; content: apiContentType[]; }

## apiContentType

{ type: 'text' | 'subtitle' | 'subsubtitle'; item: string | apiContentItemType[]; }

## apiContentItemType

{ text: string; highlight: boolean; }

# user.post

## Метод

### POST

Добавляет нового юзера

## Параметры

Параметры, которые передаются через `body` в формате `x-form-www-urlencoded`

## id_vk

### number

### обязательный

Идентификатор из `vk`

## name_vk

### string

### обязательный

Полное имя пользователя из `vk`

## telegram_nickname

### string

### обязательный

Никнейм телеграмма пользователя

## group

### string

### обязательный

Группа

## photo_url

### string

Ссылка на фотографию, которая является аватаркой

## display_name

### string

Отображаемое имя. Если не указать, то отображаемое имя станет равно `name_vk`. Длина до 40 символов

## description

### string

Описание аккаунта. Если не указать, то в дальнейшим будет указано `null`. Длина до 40 символов

## Результат

Возвращает стандартный ответ с типом `post` без `data`

## Коды status

### 200

Все с кайфом

### 0

не указан в `Headers` `master_key` или указан неправильно

### 16

ошибка `Firebase`

### 23

не указан обязательный параметр `id_vk`

### 24

параметр `id_vk` не число

### 25

не указан обязательный параметр `name_vk`

### 26

не указан обязательный параметр `telegram_nickname`

### 27

не указан обязательный параметр `group`

### 30

`description` некорректного типа

### 31

`display_name` некорректного типа

### 32

`photo_url` некорректного типа
