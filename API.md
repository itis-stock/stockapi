# Обзор

В этом руководстве вы найдете базовую информацию про STOCK API

[API](<https://en.wikipedia.org/wiki/API#:~:text=An%20application%20programming%20interface%20(API,to%20other%20pieces%20of%20software.)>) - это короче че то крутое и мощное, но как говорится, похуй

В ответ на запросы на сервер получаем JSON

# Быстрый старт

Ссылки, по которым доступно API:

- пока ссылок нет, похуй

Для обращения к API можно использовать `GET` и `POST` запросы. Но для `POST` запроса необходим `MASTER_KEY` - уникальный ключ для работы API. Но вы этот ключ не получите, так что тупо зачилльтесь

Объекты - это `docs`, `exams` и `test`

Все параметры передаются в `headers`

# Быстрый старт [dev]

- Скачиваем файл `.env`
- Пишем команду `yarn`, она установит все зависимости
- Запускаем команду `yarn run dev`
- Переходим по этой [ссылке](https://localhost:3000/check)
- А дальше все по базе

# Стандартный ответ

```typescript
{
  response: {
    status: number;
    time: number;
    type: "array" | "object";
    count?: number; //если type === "array", то count существует и означает количество элементов
    data: any; //сам результат, который берется из firebase
  }
}
```

# Коды ответов

### `200`

Все с кайфом

### `0`

не указан в headers master_key или указан неправильно

### `1`

неправильный fb_id (firebase возвращает null)

### `2`

не существует параметра fb_id

### `3`

firebase возвращает пустой массив

### `4`

не указан обязательный параметр author_id


### `5`

параметр author_id не число

### `6`

не указан обязательный параметр url

### `7`

некорректный url


### `8`

не указан обязательный параметр course

### `9`

параметр course не число

### `10`

не указан обязательный параметр semestr


### `11`

параметр semestr не число

### `12`

не указан обязательный параметр teacher

### `13`

не указан обязательный параметр subject


### `14`

некорректный teacher

### `15`

некорректный subject

### `16`

ошибка firebase

### `17`

не указан ни text, ни photo_urls

### `18`

указан photo_urls, но не указан photo_heights

### `19`

указан photo_urls, но не указан photo_widths


### `20`

какая-нибудь ссылка из photo_urls некорректна

### `21`

какое-нибудь значение из photo_heights не число

### `22`

какое-нибудь значение из photo_widths не число

### `23`

не указан обязательный параметр id_vk

### `24`

параметр id_vk не число

### `25`

не указан обязательный параметр name_vk

### `26`

не указан обязательный параметр telegram_nickname

### `27`

не указан обязательный параметр group

### `28`

параметр noise не булево значение

### `29`

параметр hidden не булево значение

### `30`

description некорректного типа

### `31`

display_name некорректного типа

### `32`

photo_url некорректного типа



# /check

Проверяем состояние сервера

# /docs.get ✅

###### GET

Возвращает документ по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора документа

### `url`

`string`  
ссылка на документ

### `id`

`number`  
**избавиться, так как бесполезно**  
идентификатор документа в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `title`

`string | null`  
короткое название, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /docs.getAll ✅

###### GET

Возвращает все документы

## Результат

Возвращает массив объектов

### `url`

`string`  
ссылка на документ

### `id`

`number`  
**избавиться, так как бесполезно**  
идентификатор документа в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `title`

`string | null`  
короткое название, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /exams.get ✅

###### GET

Возвращает экзамен по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора экзамена

### `text`

`string`  
текст самого комментария

### `attachments`

`array`  
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`  
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /exams.getAll ✅

###### GET

Возвращает список всех экзаменов

## Результат

Возвращает один массив всех экзаменов

### `text`

`string`  
текст самого комментария

### `attachments`

`array`  
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`  
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /teachers.get ✅

###### GET

Возвращает учителя по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора учителя

### `course`

`number | null`  
курс, возможен результат с `null`

### `group`

`string | null`  
номер группы, возможен результат с `null`

### `lecture`

`array`  
список преподавателей, которые ведут лекции

### `practice`

`array`  
список преподавателей, которые ведут практики

### `lecture` и `practise`

имеют 2 свойства внутри:

1. #### `name` - имя преподавателя
2. #### `subject` - название предмета

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /teachers.getAll ✅

###### GET

Возвращает список всех учителей

## Результат

Возвращает один массив всех учителей

### `course`

`number | null`  
курс, возможен результат с `null`

### `group`

`string | null`  
номер группы, возможен результат с `null`

### `lecture`

`array`  
список преподавателей, которые ведут лекции

### `practice`

`array`  
список преподавателей, которые ведут практики

### `lecture` и `practise`

имеют 2 свойства внутри:

1. #### `name` - имя преподавателя
2. #### `subject` - название предмета

# /tests.get ✅

###### GET

Возвращает контрольную или самостоятельную по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора контрольной или самостоятельной

### `text`

`string`  
текст самого комментария

### `attachments`

`array`  
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`  
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /tests.getAll ✅

###### GET

Возвращает cписок контрольных или самостоятельных

## Результат

Возвращает один массив всех контрольных или самостоятельных

### `text`

`string`  
текст самого комментария

### `attachments`

`array`  
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`  
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /docs.post ✅

###### POST

Отправляет запрос с данными для хранения в firebase

## Параметры

### `author_id`

`string`  
`обязательный параметр`  
идентификатор автора

### `url`

`string`  
`обязательный параметр`  
ссылка на документ

### `course`

`number`  
`обязательный параметр`  
курс

### `semestr`
`обязательный параметр`  
`number`  
семестр

### `teacher`
`обязательный параметр`  
`string`  
преподаватель

### `subject`
`обязательный параметр`  
`string`  
предмет

## Результат

```
{
    response: {
        status: 200,
        time: 0,
        type: 'post',
        data: fb_id (id файла, который был добавлен)
    }
}
```

### `title`
 
`string`  
`необязательный параметр`  
название документа


# /users.post ✅

###### POST

Отправляет запрос с данными для хранения в firebase

## Параметры

### `id_vk`

`number`  
`обязательный параметр`  
id юзера

### `name_vk`
`обязательный параметр`  
`string`  
имя и фамилия юзера

### `telegram_nickname`
`обязательный параметр`  
`string`  
никнейм в телеграмме

### `group`
`обязательный параметр`  
`string`  
группа


## Результат

```
{
    response: {
        status: 200,
        time: 0,
        type: 'post',
        data: fb_id (id файла, который был добавлен)
    }
}
```

### `noise`
`необязательный параметр`  
`boolean | null`  
шум, возможен результат с `null`

### `photo_url`
`необязательный параметр`  
`string | null`  
аватарка?, возможен результат с `null`

### `hidden`
`необязательный параметр`  
`boolean | null`  
анонимный режим, возможен результат с `null`

### `display_name`
`необязательный параметр`  
`string | null`  
никнейм на сайте, возможен результат с `null`  
длина от 1 до 40 включительно

### `description`
`необязательный параметр`  
`string | null`  
описание профиля на сайте, возможен результат с `null`  
длина от 1 до 40 включительно


# /exams.post ✅

###### POST

Отправляет запрос с данными для хранения в firebase

## Параметры

### `author_id`

`string`  
`обязательный параметр`  
идентификатор автора

### `course`

`number`  
`обязательный параметр`  
курс

### `semestr`
`обязательный параметр`  
`number`  
семестр

### `teacher`
`обязательный параметр`  
`string`  
преподаватель

### `subject`
`обязательный параметр`  
`string`  
предмет


## Результат

```
{
    response: {
        status: 200,
        time: 0,
        type: 'post',
        data: fb_id (id файла, который был добавлен)
    }
}
```


### `text`
`необязательный параметр`  
`string | null`  
комментарий, возможен результат с `null`

### `photo_urls`
`необязательный параметр`  
`string | null`  
фотография, возможен результат с `null`

### `photo_heights`
`необязательный параметр`  
`string | null`  
высота фотографии, возможен результат с `null`

### `photo_widths`
`необязательный параметр`  
`string | null`  
ширина фотографии, возможен результат с `null`


# /tests.post ✅

###### POST

Отправляет запрос с данными для хранения в firebase

## Параметры

### `author_id`

`string`  
`обязательный параметр`  
идентификатор автора

### `course`

`number`  
`обязательный параметр`  
курс

### `semestr`
`обязательный параметр`  
`number`  
семестр

### `teacher`
`обязательный параметр`  
`string`  
преподаватель

### `subject`
`обязательный параметр`  
`string`  
предмет


## Результат

```
{
    response: {
        status: 200,
        time: 0,
        type: 'post',
        data: fb_id (id файла, который был добавлен)
    }
}
```


### `text`
`необязательный параметр`  
`string | null`  
комментарий, возможен результат с `null`

### `photo_urls`
`необязательный параметр`  
`string | null`  
фотография, возможен результат с `null`

### `photo_heights`
`необязательный параметр`  
`string | null`  
высота фотографии, возможен результат с `null`

### `photo_widths`
`необязательный параметр`  
`string | null`  
ширина фотографии, возможен результат с `null`




## Ошибки

Коды ошибок и ответов указаны выше ⬆️