# Обзор

Здесь вы сможете найти руководство по stockapi

API поддерживает `GET` и `POST` запросы. Для `POST` запроса необходим `MASTER_KEY`. Но вы этот ключ не получите, так что зачилльтесь.

В ответ на любой запрос получаем JSON.

# Технологии

`Typescript` + `Express.js` + `Firebase firestore`

`API` залито на `netlify` с помощью `functions`

# Быстрый старт

API доступно по ссылке - https://stockapi.netlify.app/api/

## GET

`GET https://stockapi.netlify.app/api/<METHOD>?<PARAMS>`

## POST

`POST https://stockapi.netlify.app/api/<METHOD>`

Чтобы совершить `POST` запрос, необходимо указать в `headers` ключ `master_key`

Также необходимо передать `BODY PARAMS` в формате `x-form-www-urlencoded`

# Стандартный ответ

```typescript
{
  response: {
    status: number;
    time: number;
    type: 'array' | 'object' | 'error' | 'post';
    errormessage?: string;
    count?: number;
    data?: any;
  }
}
```

# Коды status

## 200

Все с кайфом

# /check

Проверяем состояние сервера

# /docs.get ✅

###### GET

Возвращает документ по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора документа

### `url`

`string`  
ссылка на документ

### `id`

`number`  
**избавиться, так как бесполезно**  
идентификатор документа в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `title`

`string | null`  
короткое название, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /docs.getAll ✅

###### GET

Возвращает все документы

## Результат

Возвращает массив объектов

### `url`

`string`  
ссылка на документ

### `id`

`number`  
**избавиться, так как бесполезно**  
идентификатор документа в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `title`

`string | null`  
короткое название, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /exams.get ✅

###### GET

Возвращает экзамен по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора экзамена

### `text`

`string`
<br>
текст самого комментария

### `attachments`

`array`
<br>
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`
<br>
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /exams.getAll ✅

###### GET

Возвращает список всех экзаменов

## Результат

Возвращает один массив всех экзаменов

### `text`

`string`
<br>
текст самого комментария

### `attachments`

`array`
<br>
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`
<br>
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /teachers.get ✅

###### GET

Возвращает учителя по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора учителя

### `course`

`number | null`  
курс, возможен результат с `null`

### `group`

`string | null`  
номер группы, возможен результат с `null`

### `indexColumn`

**Мб ненужная хуета, я чпкф добавил**  
`number | null`

### `lecture`

`array`  
список преподавателей, которые ведут лекции

### `practice`

`array`  
список преподавателей, которые ведут практики

### `lecture` и `practise`

имеют 2 свойства внутри:

1. #### `name` - имя преподавателя
2. #### `subject` - название предмета

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /teachers.getAll ✅

###### GET

Возвращает список всех учителей

## Результат

Возвращает один массив всех учителей

### `course`

`number | null`  
курс, возможен результат с `null`

### `group`

`string | null`  
номер группы, возможен результат с `null`

### `indexColumn`

**Мб ненужная хуета, я чпкф добавил**
<br>
`number | null`

### `lecture`

`array`  
список преподавателей, которые ведут лекции

### `practice`

`array`  
список преподавателей, которые ведут практики

### `lecture` и `practise`

имеют 2 свойства внутри:

1. #### `name` - имя преподавателя
2. #### `subject` - название предмета

# /tests.get ✅

###### GET

Возвращает контрольную или самостоятельную по id

## Параметры

### `fb_id`

`string`  
`обязательный параметр`  
идентификатор документа из firebase

## Результат

Возвращает один объект по указанному идентификатора контрольной или самостоятельной

### `text`

`string`
<br>
текст самого комментария

### `attachments`

`array`
<br>
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`
<br>
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️

# /tests.getAll ✅

###### GET

Возвращает cписок контрольных или самостоятельных

## Результат

Возвращает один массив всех контрольных или самостоятельных

### `text`

`string`
<br>
текст самого комментария

### `attachments`

`array`
<br>
вложения, возможен результат с `null` (хз тут, если чё подправишь)

### `id_topic`

`number`
<br>
идентификатор обсуждения в виде числа

### `year`

`number`  
указанный год, если определить год не получилось год `2020`

### `author_id`

`number`  
идентификатор автора, если определить не получилось, то по умолчанию ставится `0`

### `course`

`number | null`  
курс, возможен результат с `null`

### `semestr`

`number | null`  
семестр, возможен результат с `null`

### `teacher`

`string | null`  
преподаватель, возможен результат с `null`

### `subject`

`string | null`  
предмет, возможен результат с `null`

### `date`

`number`  
unixtime в секундах

### `likes`

`number`  
количество лайков

### `special`

`boolean`  
указание на уникальность

## Ошибки

Коды ошибок и ответов указаны выше ⬆️
